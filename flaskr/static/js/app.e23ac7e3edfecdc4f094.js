webpackJsonp([1],{"+skl":function(t,e){},"51yi":function(t,e){},BsCj:function(t,e){},IAFu:function(t,e){},JBxp:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},o,!1,function(t){a("jBfI")},null,null).exports,r=a("/ocq"),i={name:"login",data:function(){return{formInline:{user:""}}},methods:{login:function(){var t=this;this.$store.dispatch("login").then(function(e){console.log(e),e.data.success?(t.$Message.success("登陆成功"),t.$router.push({path:"index"})):t.$Message.error(e.data.data)})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("div",{staticClass:"conter"},[a("span",{staticClass:"home"}),a("ul",[a("li",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.login.username,expression:"$store.state.login.username"}],attrs:{placeholder:"账号"},domProps:{value:t.$store.state.login.username},on:{input:function(e){e.target.composing||t.$set(t.$store.state.login,"username",e.target.value)}}})]),a("li",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.login.password,expression:"$store.state.login.password"}],staticClass:"password",attrs:{type:"password",placeholder:"密码"},domProps:{value:t.$store.state.login.password},on:{input:function(e){e.target.composing||t.$set(t.$store.state.login,"password",e.target.value)}}})]),a("Button",{staticClass:"button",attrs:{type:"success",long:"long"},on:{click:t.login}},[t._v("登录")])],1)])])},staticRenderFns:[]};var l=a("VU/8")(i,u,!1,function(t){a("IAFu")},"data-v-09d44ce1",null).exports,d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Menu",{attrs:{mode:"horizontal","active-name":"1"},on:{"on-select":this.goturouter}},[e("MenuItem",{attrs:{name:"1"}},[this._v(" 内容管理")]),e("MenuItem",{attrs:{name:"2"}},[this._v(" 用户管理")]),e("Submenu",{attrs:{name:"3"}},[e("template",{slot:"title"},[this._v("小工具")]),e("MenuGroup",{attrs:{title:"工作相关"}},[e("MenuItem",{attrs:{name:"workingHours"}},[this._v("工时统计")])],1)],2),e("MenuItem",{attrs:{name:"4"}},[this._v(" 系统管理")])],1),e("router-view")],1)},staticRenderFns:[]};var m=a("VU/8")({data:function(){return{}},methods:{goturouter:function(t){this.$router.push({path:t})}}},d,!1,function(t){a("51yi")},"data-v-73e70575",null).exports,c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",[this._v("qwe")])])}]};var g=a("VU/8")({data:function(){return{}}},c,!1,function(t){a("BsCj")},"data-v-19d9c0d2",null).exports,f=a("gdkl"),p=a.n(f),v={data:function(){return{loading:!1,p:""}},methods:{formatDate1:function(t){var e=(t=new Date(t)).getFullYear(),a=t.getMonth()+1,n=t.getDate(),o=t.getHours(),s=t.getMinutes();t.getSeconds();return e+"-"+a+"-"+n+" "+o+":"+s},mGetDate:function(t,e){return new Date(t,e,0).getDate()},formatDate:function(t){var e=(t=new Date(t)).getFullYear(),a=t.getMonth()+1;t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds();return this.mGetDate(e,a)},chengedate:function(t){console.log(t),this.$store.commit("workingday",t);for(var e=t[0].split("-"),a=new Date(e[0],e[1]-1,e[2]).getTime(),n=t[1].split("-"),o=new Date(n[0],n[1]-1,n[2]).getTime(),s=this.formatDate(a),r=this.formatDate(o),i=0,u=0,l=0,d=new Date(a).getDate();d<=s;d++){i+=1,0!==(g=new Date(new Date(e[0],e[1]-1,d).getTime()).getDay())&&6!==g||(u+=1);var m=new Date(new Date(e[0],e[1]-1,d).getTime()).getMonth()+1;m<10&&(m="0"+m),d<10&&(d="0"+d),m="d"+m+d,1===p.a[2018][m]&&(l+=1),0===p.a[2018][m]&&(u-=1)}for(var c=new Date(o).getDate();c<=r;c--){var g;if(i+=1,0!==(g=new Date(new Date(n[0],n[1]-1,c).getTime()).getDay())&&6!==g||(u+=1),1===c)break}var f=i-u-l;this.p="周期内总天数="+i+",周末数="+u+",节假日数="+l+",工作日天数="+f+"周期内标准工时为"+8*f},query:function(){var t=this;this.loading=!0,this.$store.commit("postdata"),this.$store.dispatch("workingday").then(function(e){t.loading=!1})}},mounted:function(){}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{staticClass:"Form",attrs:{model:t.$store.state.workingHours.formItem,"label-width":80}},[a("FormItem",{attrs:{label:"计算周期"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placeholder:"选择时间",value:"yyyy-MM-dd"},on:{"on-change":t.chengedate},model:{value:t.$store.state.workingHours.formItem.date,callback:function(e){t.$set(t.$store.state.workingHours.formItem,"date",e)},expression:"$store.state.workingHours.formItem.date"}})],1),a("FormItem",{attrs:{label:"选择人员"}},[a("Select",{model:{value:t.$store.state.workingHours.formItem.select,callback:function(e){t.$set(t.$store.state.workingHours.formItem,"select",e)},expression:"$store.state.workingHours.formItem.select"}},[a("Option",{attrs:{value:"sunfucong"}},[t._v("我")]),a("Option",{attrs:{value:"guotonghao"}},[t._v("小郭")])],1)],1),a("FormItem",{attrs:{label:"任务状态"}},[a("Select",{model:{value:t.$store.state.workingHours.formItem.state,callback:function(e){t.$set(t.$store.state.workingHours.formItem,"state",e)},expression:"$store.state.workingHours.formItem.state"}},[a("Option",{attrs:{value:"Closed"}},[t._v("关闭")]),a("Option",{attrs:{value:"Resolved"}},[t._v("已解决")]),a("Option",{attrs:{value:"Resolved, Closed"}},[t._v("已解决+关闭")])],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.query}},[t._v("查询")])],1),a("FormItem",{attrs:{label:"工时统计:"}},[a("p",[t._v(t._s(t.$store.state.workingHours.formItem.workingHours))])]),a("FormItem",{attrs:{label:"周期小结:"}},[a("p",[t._v(t._s(t.p))])])],1)],1)},staticRenderFns:[]};var w=a("VU/8")(v,h,!1,function(t){a("JBxp")},"data-v-3b8ab161",null).exports;n.default.use(r.a);var $=new r.a({routes:[{path:"/",name:"login",component:l},{path:"/index",name:"index",component:m,children:[{path:"/index",name:"home",component:g},{path:"/workingHours",name:"workingHours",component:w}]}]}),k=a("BTaQ"),I=a.n(k),_=(a("+skl"),a("mtWM")),D=a.n(_),H=a("NYxO"),y="";y="";var x=D.a.create({baseURL:y}),b=function(t,e){return x.post("./api/login",{username:e.state.username,password:e.state.password})},F=function(t,e){return x.post("./api/workingday",{Startdate:e.state.formItem.Startdate,enddate:e.state.formItem.enddate,code:e.state.formItem.select,state:e.state.formItem.state})},M={username:"",password:"",then:""},C={state:M,mutations:{},actions:{login:function(t){t.commit;return b(name,{state:M})}}},S={formItem:{date:"",Startdate:"",enddate:"",select:"",workingHours:0,state:"Resolved, +Closed"}},B={state:S,mutations:{postdata:function(t){t.formItem.workingHours=0},getdata:function(t,e){e.forEach(function(e){t.formItem.workingHours+=e.fields.customfield_10101})},workingday:function(t,e){t.formItem.Startdate=e[0],t.formItem.enddate=e[1]}},actions:{workingday:function(t){var e=t.commit;return F(name,{state:S}).then(function(t){e("getdata",t.data.issues)})}}};n.default.use(H.a);var R=new H.a.Store({modules:{login:C,workingHours:B}});n.default.config.productionTip=!1,n.default.use(I.a),new n.default({el:"#app",router:$,store:R,components:{App:s},template:"<App/>"})},gdkl:function(t,e){t.exports={2018:{d0616:1,d0617:1,d0618:1,d0922:1,d0923:1,d0924:1,d0929:0,d0930:0,d1001:1,d1002:1,d1003:1,d1004:1,d1005:1,d1006:1,d1007:1}}},jBfI:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e23ac7e3edfecdc4f094.js.map